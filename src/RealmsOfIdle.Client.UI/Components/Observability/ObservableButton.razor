@inject ILogger<ObservableButton> Logger
@inject UiMetrics Metrics

<button @onclick="HandleClick" class="@CssClass" disabled="@Disabled">
    @ChildContent
</button>

@code {
    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    [Parameter]
    public string? CssClass { get; set; }

    [Parameter]
    public bool Disabled { get; set; }

    [Parameter]
    public string? ElementId { get; set; }

    [Parameter]
    public string? ElementType { get; set; } = "button";

    [Parameter]
    public EventCallback<MouseEventArgs> OnClick { get; set; }

    private async Task HandleClick(MouseEventArgs e)
    {
        if (Disabled) return;

        // Log click at Debug level
        Logger.LogDebug("UI element clicked: {ElementType} {ElementId}", ElementType, ElementId ?? "(no id)");

        // Record metric
        Metrics.RecordElementClick(ElementType ?? "button", ElementId);

        // Invoke original click handler
        await OnClick.InvokeAsync(e);
    }
}
